{
  "name": "Mongodbuserstore",
  "tagline": "",
  "body": "# mongodbuserstore\r\n\r\nMongoDB User Store for WSO2 Identity Server\r\nFirst create a Database in MongoDB named wso2_carbon_db \r\nIn mongodb if you create a empty database without a collections it will store it in RAM and not store permanelty therefore create a samle collection using below script\r\ndb.system.js.save(\r\n\r\n   {\r\n\r\n     _id: \"getNextSequence\",\r\n\r\n     value : function(name) { \r\n\r\n            \r\n\r\n        var ret = db.COUNTERS.findAndModify(\r\n\r\n          {\r\n\r\n            query: { _id: name },\r\n\r\n            update: { $inc: { seq: 1 } },\r\n\r\n            new: true\r\n\r\n          }\r\n\r\n        );\r\n\r\n\r\n\r\n        return ret.seq;\r\n\r\n     }\r\n\r\n   }\r\n\r\n);\r\ndb.COUNTERS.insert({\r\n\r\n    _id: \"UM_DOMAIN\",\r\n\r\n    seq: 0\r\n\r\n});\r\ndb.UM_DOMAIN.insert({\r\n    UM_DOMAIN_ID: getNextSequence(\"UM_DOMAIN\"),\r\n    UM_DOMAIN_NAME: \"\",\r\n    UM_TENANT_ID: 0\r\n});\r\n\r\nhere this getNextSequence is to auto_increment id in UM_DOMAIN collection since MongoDB doesn't have auto_increment i implement it using a simple script and COUNTERS is for store the current sequence of collection\r\n\r\nafter that go to add user store in IS admin console and select MongoDBUserStoreManager from UserStoreManager class dropdown \r\nthen create a new user store with giving appropriate connection configuration\r\n\r\nand thats all it will create a new mongodb userstore in Identity Server\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}